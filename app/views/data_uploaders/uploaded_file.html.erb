<h2>Uploaded Files</h2>
<table id="uploadedSchema" class="table table-striped table-bordered dataTable custom_table table-hover table-highlight table-checkable">
  <thead>
      <tr>
        <th style="width: 250px">Upload File</th>
        <th style="width: 250px">Data Source</th>
        <th style="width: 250px">Upload Date</th>
        <th style="width: 125px">Action</th>
      </tr>
  </thead>

  </thead>

  <tbody>
  <% if @uploadedFiles.size > 0 then %>
      <% @uploadedFiles.each do |record| %>
          <tr>
            <td>
              <%= record.file_name %>
            </td>
            <td>
              <%= record.table_name %>
            </td>
            <td>
              <%= (record.created_on).strftime("%m/%d/%Y") %>
            </td>
            <td>
              <div>
                <% if record.is_table_created then %>
                    <%= link_to "Schema", showuploadedschema_datauploaders_path({:table_name => (record.table_name)}), :type=>"button", :class=>"btn btn-sm btn-warning", :onclick => "show_loading_window();" %>
                    <% if record.is_record_uploaded then %>
                    	<div class="btn-group">
						  <button type="button" class="btn btn-sm btn-primary"><span class="glyphicon glyphicon-list" aria-hidden="true"></button>
						  <button type="button" class="btn btn-sm btn-primary dropdown-toggle " data-toggle="dropdown" aria-expanded="false">
						    <span class="caret"></span>
						    <span class="sr-only">Toggle Dropdown</span>
						  </button>
						  <ul class="dropdown-menu" role="menu">
						    <li><%= link_to "Show In Table", uploadfilerecord_datauploaders_path({:table_name => (record.table_name)}), :type=>"button", :class=>"link", :onclick => "show_loading_window();" %></li>
						    <li><%= link_to "Show In Json", uploadfilerecordjson_datauploaders_path({:table_name => (record.table_name)}), :type=>"button", :class=>"link", :onclick => "show_loading_window();" %></li>					    
						  </ul>
						</div>                        
                    <% else %>
                        <button type="button" class="btn btn-sm btn-primary" onclick="show_message('Data upload is still in progress. Please refresh the page for latest status', 'info', this,false);"> 
                        	Inprocess</span> 
                        	</button>
                    <% end %>
                <% else %>
                    <%= (link_to "here", deleteuserfilemappingrecord_datauploaders_path({:table_name => (record.table_name)}), :method => :delete, :style => "display: none", :class => "include_in_message" )%>
                    <button type="button" class="btn btn-sm btn-warning" onclick="show_message('There was an error in your previous upload. Please upload your file again and if you want to delete this entry from history please click ', 'error', this,true);">Schema</button>
                <% end %>
              </div>
            </td>
          </tr>
      <% end %>
  <% end %>
  </tbody>
</table>
<div id="div_loading_window" class="modal fade in" style="width: 100% !Important; overflow-y: hidden; height: 100% !Important;">
  <%= image_tag("ajax-loader.gif", :class => "modal-dialog") %>
  <div class="modal-body">
    <p>Please wait while we retrieve your result!!!!!</p>
  </div>
</div>
<%= javascript_include_tag('datauploaders.js') %>