<h1>Uploaded Files</h1>
<table id="uploadedSchema" class="table table-striped table-bordered dataTable table-hover table-highlight table-checkable">
  <thead>
      <tr>
        <th style="width: 250px">Upload File</th>
        <th style="width: 250px">Data Source</th>
        <th style="width: 250px">Upload Date</th>
        <th style="width: 90px">Action</th>
      </tr>
  </thead>

  </thead>

  <tbody>
  <% if @uploadedFiles.size > 0 then %>
      <% @uploadedFiles.each do |record| %>
          <tr>
            <td>
              <%= record.file_name %>
            </td>
            <td>
              <%= record.table_name %>
            </td>
            <td>
              <%= (record.created_on).strftime("%m/%d/%Y") %>
            </td>
            <td>
              <div>
                <% if record.is_table_created then %>
                    <%= link_to "Schema", showuploadedschema_datauploaders_path({:table_name => (record.table_name).downcase.pluralize}), :type=>"button", :class=>"btn btn-sm btn-warning", :onclick => "show_loading_window();" %>
                    <% if record.is_record_uploaded then %>
                        <%= link_to "Records", uploadfilerecord_datauploaders_path({:table_name => (record.table_name).downcase.pluralize}), :type=>"button", :class=>"btn btn-sm btn-primary", :onclick => "show_loading_window();" %>
                    <% else %>
                        <button type="button" class="btn btn-sm btn-primary" onclick="show_message('Data upload is still in progress. Please refresh the page for latest status', 'info', this);">Records</button>
                    <% end %>
                <% else %>
                    <%= (link_to "here", deleteuserfilemappingrecord_datauploaders_path({:table_name => (record.table_name)}), :method => :delete, :style => "display: none", :class => "include_in_message" )%>
                    <button type="button" class="btn btn-sm btn-warning" onclick="show_message('There was an error in your previous upload. Please upload your file again and if you want to delete this entry from history please click ', 'error', this);">Schema</button>
                <% end %>
              </div>
            </td>
          </tr>
      <% end %>
  <% end %>
  </tbody>
</table>
<div id="div_loading_window" class="modal fade in" style="width: 100% !Important; overflow-y: hidden; height: 100% !Important;">
  <%= image_tag("ajax-loader.gif", :class => "modal-dialog") %>
  <div class="modal-body">
    <p>Please wait while we retrieve your result!!!!!</p>
  </div>
</div>
<%= javascript_include_tag('datauploaders.js') %>